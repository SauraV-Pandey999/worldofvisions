<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AETHER-9 // WORLD OF VISION-S</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Orbitron:wght@400;900&family=Share+Tech+Mono&family=Rajdhani:wght@300;600;700&display=swap');

        :root {
            --glow-cyan: #00f3ff;
            --glow-magenta: #ff00ff;
            --terminal-bg: #02040a;
            --card-bg: rgba(0, 243, 255, 0.03);
            --border-glow: 1px solid rgba(0, 243, 255, 0.3);
            --transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        }

        body {
            background: var(--terminal-bg);
            color: var(--glow-cyan);
            font-family: 'Rajdhani', sans-serif;
            margin: 0; padding: 0;
            overflow-x: hidden;
            display: flex; flex-direction: column; align-items: center;
        }

        #bg-canvas { position: fixed; top: 0; left: 0; z-index: -1; filter: brightness(0.4) blur(1px); }

        .wrapper { width: 90%; max-width: 1000px; margin: 50px auto; position: relative; }

        header {
            text-align: center; margin-bottom: 40px;
            border-bottom: 3px double var(--glow-cyan);
            padding-bottom: 20px;
            box-shadow: 0 10px 20px -10px var(--glow-cyan);
        }

        .watermark {
            font-family: 'Orbitron', sans-serif; font-size: 0.8rem; letter-spacing: 5px;
            color: rgba(0, 243, 255, 0.4); text-align: center; margin-bottom: 10px;
            animation: pulse 2s infinite;
        }

        h1 {
            font-family: 'Orbitron', sans-serif; font-size: 2.5rem; letter-spacing: 10px; 
            margin: 0; text-shadow: 0 0 20px var(--glow-cyan); text-transform: uppercase;
        }

        .system-ticker { font-family: 'Share Tech Mono', monospace; font-size: 0.9rem; color: var(--glow-magenta); margin-top: 10px; }

        .control-room { display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 20px; margin-bottom: 40px; }

        .btn-panel {
            background: var(--card-bg); border: var(--border-glow); color: var(--glow-cyan); 
            padding: 15px; font-family: 'Orbitron', sans-serif; font-size: 0.8rem;
            cursor: pointer; position: relative; overflow: hidden; transition: var(--transition); text-transform: uppercase;
        }

        .btn-panel.active { background: var(--glow-cyan); color: #000; box-shadow: 0 0 30px var(--glow-cyan); }

        .subject-matrix { display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 20px; }

        .subject-card {
            background: rgba(255, 255, 255, 0.02); border: 1px solid rgba(255, 255, 255, 0.1);
            padding: 25px; border-radius: 4px; transition: var(--transition);
        }

        .subject-card:hover { border-color: var(--glow-cyan); background: rgba(0, 243, 255, 0.05); }

        .input-row { display: flex; gap: 15px; margin-bottom: 10px; }
        .field { flex: 1; }
        .field label { font-size: 0.7rem; text-transform: uppercase; opacity: 0.6; display: block; }

        input, select {
            width: 100%; background: #000; border: 1px solid #333; color: var(--glow-cyan); 
            padding: 10px; box-sizing: border-box; font-family: 'Share Tech Mono', monospace; font-size: 1rem; outline: none;
        }

        .execute-hub { margin-top: 50px; text-align: center; display: flex; flex-wrap: wrap; justify-content: center; gap: 20px; }

        .big-btn {
            background: transparent; border: 2px solid var(--glow-magenta); color: var(--glow-magenta); 
            padding: 20px 40px; font-family: 'Orbitron', sans-serif; font-size: 1.2rem; cursor: pointer; transition: 0.5s;
        }

        .big-btn:hover { background: var(--glow-magenta); color: #fff; box-shadow: 0 0 50px var(--glow-magenta); }
        
        .dl-btn { border-color: var(--glow-cyan); color: var(--glow-cyan); display: none; }
        .dl-btn:hover { background: var(--glow-cyan); color: #000; box-shadow: 0 0 50px var(--glow-cyan); }

        #result-overlay {
            display: none; margin-top: 50px; padding: 40px; border: 2px solid var(--glow-cyan); 
            background: #000; position: relative; overflow: hidden;
        }

        /* PRINT STYLING */
        .report-header { border-bottom: 1px solid var(--glow-cyan); padding-bottom: 10px; margin-bottom: 20px; display: flex; justify-content: space-between; align-items: center; }
        .gpa-output { font-size: 7rem; font-family: 'Orbitron', sans-serif; margin: 0; font-weight: 900; line-height: 1; color: var(--glow-cyan); }
        
        .remark-box {
            font-family: 'Share Tech Mono', monospace; color: var(--glow-magenta); border: 1px dashed var(--glow-magenta);
            padding: 10px; margin: 20px 0; text-transform: uppercase; font-size: 1.1rem;
        }

        .stat-grid { display: grid; grid-template-columns: 1fr 1fr 1fr; margin-top: 30px; gap: 20px; text-align: left; border-top: 1px solid #333; padding-top: 20px; }
        .stat-label { color: var(--glow-magenta); font-size: 0.8rem; text-transform: uppercase; }
        .stat-val { font-size: 1.5rem; font-weight: bold; }

        @keyframes pulse { 0%, 100% { opacity: 0.4; } 50% { opacity: 1; } }
        footer { margin: 50px 0; font-size: 0.7rem; opacity: 0.5; letter-spacing: 2px; }
    </style>
</head>
<body>

<canvas id="bg-canvas"></canvas>

<div class="wrapper">
    <div class="watermark">WORLD OF VISION-S</div>
    <header>
        <h1>AETHER-9_OMNI</h1>
        <div class="system-status">NEB SCIENCE CORE V.2026 // STATUS: ONLINE</div>
        <div class="system-ticker" id="ticker">CALIBRATING ACADEMIC FREQUENCIES...</div>
    </header>

    <div class="control-room">
        <button class="btn-panel active" id="bioBtn" onclick="setGroup('bio')">Biological Cluster</button>
        <button class="btn-panel" id="phyBtn" onclick="setGroup('phy')">Physical Cluster</button>
        <button class="btn-panel active" id="marksBtn" onclick="setMode('marks')">Raw Data Entry</button>
        <button class="btn-panel" id="gpaBtn" onclick="setMode('gpa')">Grade Point Selection</button>
    </div>

    <div id="matrix" class="subject-matrix"></div>

    <div class="execute-hub">
        <button class="big-btn" onclick="processGPA()">EXECUTE ANALYSIS</button>
        <button class="big-btn dl-btn" id="dlBtn" onclick="downloadReport()">DOWNLOAD REPORT CARD</button>
    </div>

    <div id="result-overlay">
        <div class="report-header">
            <span style="font-family: 'Orbitron'; color: var(--glow-magenta);">OFFICIAL TRANSCRIPT // VISION-S</span>
            <span id="timestamp" style="font-family: 'Share Tech Mono'; font-size: 0.8rem;"></span>
        </div>
        
        <div class="stat-label">AGGREGATED_GPA (NEB 2082 SYSTEM)</div>
        <div class="gpa-output" id="final-gpa">0.00</div>
        
        <div class="remark-box" id="system-remark">STANDING BY...</div>
        
        <div class="stat-grid">
            <div>
                <div class="stat-label">Efficiency</div>
                <div class="stat-val" id="eff-val">0%</div>
            </div>
            <div id="weak-container">
                <div class="stat-label">Weakest_Link</div>
                <div class="stat-val" id="weak-val">None</div>
            </div>
            <div>
                <div class="stat-label">Rank_Class</div>
                <div class="stat-val" id="rank-val">N/A</div>
            </div>
        </div>
        
        <div style="margin-top: 30px; font-size: 0.6rem; color: var(--glow-cyan); opacity: 0.5; text-align: center;">
            VERIFIED BY WORLD OF VISION-S SECURITY PROTOCOL
        </div>
    </div>

    <footer>[SYSTEM_ORIGIN: WORLD OF VISION-S // DATA_KEY: NEB_2082]</footer>
</div>

<script>
    const canvas = document.getElementById('bg-canvas');
    const ctx = canvas.getContext('2d');
    canvas.width = window.innerWidth;
    canvas.height = window.innerHeight;
    const points = Array(Math.floor(canvas.width / 25)).fill(0);

    function animate() {
        ctx.fillStyle = 'rgba(2, 4, 10, 0.1)';
        ctx.fillRect(0, 0, canvas.width, canvas.height);
        ctx.fillStyle = '#00f3ff';
        points.forEach((y, i) => {
            ctx.fillText(Math.random() > 0.5 ? "1" : "0", i * 25, y);
            points[i] = y > canvas.height || Math.random() > 0.98 ? 0 : y + 20;
        });
        requestAnimationFrame(animate);
    }
    animate();

    let config = { group: 'bio', mode: 'marks' };
    const GRADES = [
        {l: "4.0 A+", v: 4.0}, {l: "3.6 A", v: 3.6}, {l: "3.2 B+", v: 3.2},
        {l: "2.8 B", v: 2.8}, {l: "2.4 C+", v: 2.4}, {l: "2.0 C", v: 2.0},
        {l: "1.6 D", v: 1.6}, {l: "0.0 NG", v: 0}
    ];

    const SUBJECTS = [
        {n: "English", th: 3, pr: 1},
        {n: "Nepali", th: 2.25, pr: 0.75},
        {n: "Physics", th: 3.75, pr: 1.25},
        {n: "Chemistry", th: 3.75, pr: 1.25},
        {n: "Mathematics", th: 3.75, pr: 1.25}
    ];

    function setGroup(g) { config.group = g; render(); }
    function setMode(m) { config.mode = m; render(); }

    function render() {
        document.getElementById('bioBtn').classList.toggle('active', config.group==='bio');
        document.getElementById('phyBtn').classList.toggle('active', config.group==='phy');
        document.getElementById('marksBtn').classList.toggle('active', config.mode==='marks');
        document.getElementById('gpaBtn').classList.toggle('active', config.mode==='gpa');
        const root = document.getElementById('matrix');
        const list = [...SUBJECTS, {n: config.group==='bio'?'Biology':'Computer Science', th:3.75, pr:1.25}];
        
        root.innerHTML = list.map((s, i) => `
            <div class="subject-card">
                <h3 style="border-left: 3px solid var(--glow-magenta); padding-left:10px;">${s.n.toUpperCase()}</h3>
                <div class="input-row">
                    <div class="field">
                        <label>Theory</label>
                        ${config.mode === 'marks' ? `<input type="number" class="th-in" max="75" oninput="limit(this, 75)">` : 
                        `<select class="th-in">${GRADES.map(g=>`<option value="${g.v}">${g.l}</option>`).join('')}</select>`}
                    </div>
                    <div class="field">
                        <label>Practical</label>
                        ${config.mode === 'marks' ? `<input type="number" class="pr-in" max="25" oninput="limit(this, 25)">` : 
                        `<select class="pr-in">${GRADES.map(g=>`<option value="${g.v}">${g.l}</option>`).join('')}</select>`}
                    </div>
                </div>
            </div>`).join('');
    }

    function limit(el, m) { if(el.value > m) el.value = m; }

    function getGP(m, max) {
        let p = (m / max) * 100;
        if(p >= 90) return 4.0; if(p >= 80) return 3.6; if(p >= 70) return 3.2;
        if(p >= 60) return 2.8; if(p >= 50) return 2.4; if(p >= 40) return 2.0;
        if(p >= 35) return 1.6; return 0;
    }

    function processGPA() {
        const ths = document.querySelectorAll('.th-in');
        const prs = document.querySelectorAll('.pr-in');
        const list = [...SUBJECTS, {n: config.group==='bio'?'Biology':'Computer Science', th:3.75, pr:1.25}];
        let weighted = 0, totalCr = 0, worst = {n: '', v: 5};

        list.forEach((s, i) => {
            let tV = config.mode === 'marks' ? getGP(ths[i].value || 0, 75) : parseFloat(ths[i].value);
            let pV = config.mode === 'marks' ? getGP(prs[i].value || 0, 25) : parseFloat(prs[i].value);
            let avg = ((tV * s.th) + (pV * s.pr)) / (s.th + s.pr);
            if(avg < worst.v) worst = {n: s.n, v: avg};
            weighted += (tV * s.th) + (pV * s.pr);
            totalCr += (s.th + s.pr);
        });

        const gpa = (weighted / totalCr).toFixed(2);
        document.getElementById('final-gpa').innerText = gpa;
        document.getElementById('eff-val').innerText = (gpa/4*100).toFixed(1) + "%";
        
        if(parseFloat(gpa) >= 4.0) {
            document.getElementById('weak-container').style.display = 'none';
            document.getElementById('system-remark').innerText = "SYSTEM_OPTIMIZED: PERFECT SCORE. VISION-S ELITE STATUS ACHIEVED.";
        } else {
            document.getElementById('weak-container').style.display = 'block';
            document.getElementById('weak-val').innerText = worst.n.toUpperCase();
            document.getElementById('system-remark').innerText = gpa >= 3.6 ? "REMARK: HIGH PERFORMANCE. SCHOLARSHIP ELIGIBLE." : gpa >= 3.0 ? "REMARK: CORE STABILITY DETECTED. OPTIMIZE WEAK LINKS." : "REMARK: URGENT SYSTEM UPGRADE REQUIRED.";
        }

        document.getElementById('rank-val').innerText = gpa >= 3.6 ? "ELITE" : gpa >= 3.2 ? "SUPERIOR" : "STANDARD";
        document.getElementById('timestamp').innerText = "REF: " + Math.random().toString(36).substr(2, 9).toUpperCase() + " // " + new Date().toLocaleDateString();
        document.getElementById('result-overlay').style.display = 'block';
        document.getElementById('dlBtn').style.display = 'inline-block';
        window.scrollTo({ top: document.body.scrollHeight, behavior: 'smooth' });
    }

    function downloadReport() {
        const report = document.getElementById('result-overlay');
        html2canvas(report, {
            backgroundColor: '#02040a',
            scale: 2,
            logging: false
        }).then(canvas => {
            const link = document.createElement('a');
            link.download = 'VISION-S_REPORT_CARD.png';
            link.href = canvas.toDataURL("image/png");
            link.click();
        });
    }

    render();
    setInterval(() => {
        const msgs = ["SYNCING NETS...", "VISION-S HUB ACTIVE...", "SCANNING NEB_2082...", "READY."];
        document.getElementById('ticker').innerText = msgs[Math.floor(Math.random()*msgs.length)];
    }, 3000);
</script>
</body>
</html>
